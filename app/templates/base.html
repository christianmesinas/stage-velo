<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Velo App{% endblock %}</title>

  <!-- âœ… Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- âœ… Eigen basisstijl -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  {% block head %}{% endblock %}
</head>
<body>

{% block header %}
<header>
  <a href="/">
    <div class="logo">
      <img src="{{ url_for('static', filename='images/LOGO2.png') }}" alt="vrouw op fiets" width="100" height="50">
    </div>
  </a>

  <nav class="nav-links">
    <a href="#">Hoe het werkt</a>
    <a href="/tarieven">Tarieven</a>
    <a href="/maps">Vind een fiets</a>
    <a href="#">Help</a>
    <a href="#footer">Contact</a>
    <div class="dropdown">
      <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Meer â–¼</a>
      <div class="dropdown-menu">
        <a class="dropdown-item" href="/defect">Fiets defect?</a>
        <a class="dropdown-item" href="#">optie 2</a>
      </div>
    </div>
  </nav>

  <div class="nav-buttons">
    {% if session.get('Gebruiker') %}
      <span>Welkom, {{ session['Gebruiker']['name'] }}</span>
      <a href="{{ url_for('routes.profile') }}" class="profile">Profiel</a>
      <a href="{{ url_for('routes.logout') }}" class="logout">Uitloggen</a>
    {% else %}
      <a href="{{ url_for('routes.login') }}" class="login">Inloggen</a>
      <a href="{{ url_for('routes.login') }}" class="register">Account aanmaken</a>
    {% endif %}
  </div>
</header>
{% endblock %}

<main>
  {% block content %}{% endblock %}
</main>

{% block scripts %}{% endblock %}

<!-- ðŸŒ— Donkere modus toggle knop -->
<button id="darkModeToggle" class="dark-toggle-btn" style="right: 0.5rem;">ðŸŒ—</button>

<!-- ðŸŒ— Icoon dat uit de knop omhoog vliegt -->
<div id="theme-icon-animation" class="theme-icon">ðŸŒ™</div>

<!-- âœ… Donkere modus script -->
<script>
  const toggleButton = document.getElementById("darkModeToggle");
  const themeIcon = document.getElementById("theme-icon-animation");
  const prefersDark = localStorage.getItem("darkMode") === "true";

  function updateToggleIcon(isDark) {
    toggleButton.textContent = isDark ? "ðŸŒž" : "ðŸŒ™";
  }

  if (prefersDark) {
    document.body.classList.add("dark-mode");
    updateToggleIcon(true);
  } else {
    updateToggleIcon(false);
  }

  toggleButton.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");
    const nowDark = document.body.classList.contains("dark-mode");
    localStorage.setItem("darkMode", nowDark);
    updateToggleIcon(nowDark);

    const rect = toggleButton.getBoundingClientRect();
    themeIcon.textContent = nowDark ? "ðŸŒ™" : "ðŸŒž";
    themeIcon.style.left = `${rect.left + rect.width / 2 - 48}px`;
    themeIcon.style.top = `${rect.top}px`;
    themeIcon.classList.add("show");

    setTimeout(() => {
      themeIcon.classList.remove("show");
    }, 2000);
  });
</script>

<!-- âœ… Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- âœ… Flash alerts fade-out -->
<script>
  setTimeout(() => {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach((alert) => {
      alert.classList.remove('show');
      alert.classList.add('fade');
    });
  }, 2000);
</script>

</body>
</html>
